const { spawn } = require('child_process');
app.post('/api/market-research', (req, res) => {
  const topic = req.body.topic;
  const py = spawn('python', ['services/market_research.py', topic]);
  let output = '';
  py.stdout.on('data', (data) => { output += data.toString(); });
  py.on('close', () => {
    try {
      const result = JSON.parse(output);
      res.json(result);
    } catch (err) {
      res.status(500).json({ error: 'Failed to parse Python output.' });
    }
  });
});